<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 3 d?c. 2010 17:16:58 by Hibernate Tools 3.3.0.GA -->
<hibernate-mapping>
  <class discriminator-value="MOVIE" name="hibernate.movie.Movie" table="MOVIE">
    <id access="field" name="id" type="java.lang.Long">
      <meta attribute="scope-set">protected</meta>
      <column name="MOVIE_ID"/>
      <generator class="native"/>
    </id>
    <discriminator column="MOVIE_TYPE" type="string"/>
    <property name="title" type="java.lang.String">
      <meta attribute="use-in-tostring">true</meta>
      <column name="TITLE" not-null="true"/>
    </property>
    <many-to-one cascade="all" class="hibernate.TechData" name="techData" unique="true">
      <column name="TECHDATA_ID"/>
    </many-to-one>
    <many-to-one cascade="all" class="hibernate.image.Index" name="index">
      <column name="INDEX_ID"/>
    </many-to-one>
    <many-to-one cascade="all" class="hibernate.image.Thumbnail" name="thumb">
      <column name="THUMB_ID"/>
    </many-to-one>
    <set name="Actors" table="MOVIE_ACTORS">
      <meta attribute="field-description">Actors in this movie</meta>
      <meta attribute="use-in-tostring">true</meta>
      <key column="MOVIE_ID"/>
      <many-to-many class="hibernate.Actor" column="ACTOR_ID"/>
    </set>
    <set name="Tags" table="MOVIE_TAGS">
      <meta attribute="field-description">Tags describing this movie</meta>
      <meta attribute="use-in-tostring">true</meta>
      <key column="MOVIE_ID"/>
      <many-to-many class="hibernate.tags.SimpleTag" column="TAG_ID"/>
    </set>
  </class>
  <query name="com.hibernate.movieByTitle">
    
        from Movie as movie
        where upper(movie.title) = upper(:title)
      
    </query>
</hibernate-mapping>
